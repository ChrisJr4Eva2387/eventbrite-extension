function EventsList(){"use strict";null!==____Class0&&____Class0.apply(this,arguments)}function App(a){"use strict";____Class1.call(this,a),this.state={events:a.locationData,location:a.locationName,radius:a.locationRadius,popularEvents:a.popularEvents,nextWeekendEvents:a.nextWeekendEvents}}var CONSTANTS={TOKEN:"DB76SJDUSQFFHVNSQC6Y",API_ENDPOINT:"https://www.eventbriteapi.com/v3/events/search/",POSTDATA_DATE_FORMAT:"YYYY-MM-DDTHH:mm:ss[Z]",EVENT_DISPLAY_DATE_FORMAT:"ddd, MMM D h:mm A"},storage=chrome.storage.local,mountNode=document.getElementById("app"),locationName="",locationData=[],locationRadius,popularEvents="",nextWeekendEvents="",____Class0=React.Component;for(var ____Class0____Key in ____Class0)____Class0.hasOwnProperty(____Class0____Key)&&(EventsList[____Class0____Key]=____Class0[____Class0____Key]);var ____SuperProtoOf____Class0=null===____Class0?null:____Class0.prototype;EventsList.prototype=Object.create(____SuperProtoOf____Class0),EventsList.prototype.constructor=EventsList,EventsList.__superConstructor__=____Class0,Object.defineProperty(EventsList.prototype,"handleClick",{writable:!0,configurable:!0,value:function(a){"use strict";a.preventDefault(),chrome.tabs.create({url:$(a.currentTarget).attr("href")})}}),Object.defineProperty(EventsList.prototype,"render",{writable:!0,configurable:!0,value:function(){"use strict";if(0==this.props.events.length&&""!=$.trim(this.props.locationName))return React.createElement("div",{className:"no-events-found"},React.createElement("span",null,"Whoops! No events found."));var a=this.props.events.map(function(a){var b=moment(a.start.local).format(CONSTANTS.EVENT_DISPLAY_DATE_FORMAT),c=(moment(a.end.local).format(CONSTANTS.EVENT_DISPLAY_DATE_FORMAT),null!=a.venue.address.city?a.venue.address.city+","+a.venue.address.region:null),d={backgroundImage:"url("+a.logo_url+")"};return React.createElement("li",{key:a.id,className:"event-container"},React.createElement("a",{href:a.url,onClick:this.handleClick},React.createElement("div",{className:"event"},React.createElement("div",{className:"image",style:d,"data-adaptive-background":"1","data-ab-css-background":"1"}),React.createElement("div",{className:"body"},React.createElement("span",{className:"title"},a.name.text),React.createElement("span",{className:"organizer"},a.organizer.name),React.createElement("span",{className:"date"},b),null!=c?React.createElement("span",{className:"address"},c):""))))},this);return React.createElement("div",null,React.createElement("ul",{className:"events-list"},a))}});var ____Class1=React.Component;for(var ____Class1____Key in ____Class1)____Class1.hasOwnProperty(____Class1____Key)&&(App[____Class1____Key]=____Class1[____Class1____Key]);var ____SuperProtoOf____Class1=null===____Class1?null:____Class1.prototype;App.prototype=Object.create(____SuperProtoOf____Class1),App.prototype.constructor=App,App.__superConstructor__=____Class1,Object.defineProperty(App.prototype,"getData",{writable:!0,configurable:!0,value:function(a,b,c,d){"use strict";var e=this,f={"location.address":a,"location.within":b+"mi",token:CONSTANTS.TOKEN};if(c&&(f.popular="on"),d){var g=moment().add(1,"weeks").endOf("isoWeek").subtract(2,"day").add(1,"second"),h=moment().add(1,"weeks").endOf("isoWeek");f["start_date.range_start"]=g.format(CONSTANTS.POSTDATA_DATE_FORMAT),f["start_date.range_end"]=h.format(CONSTANTS.POSTDATA_DATE_FORMAT)}$.ajax({url:CONSTANTS.API_ENDPOINT,type:"GET",dataType:"JSON",data:f,success:function(f){var g={locationName:a,locationRadius:b,popularEvents:c,nextWeekendEvents:d,locationData:f.events.map(function(a){return{id:a.id,start:a.start,end:a.end,url:a.url,venue:a.venue,logo_url:a.logo_url,name:a.name,organizer:a.organizer}})};storage.set({"eventbrite-aroundme":JSON.stringify(g)}),e.setState({events:f.events,location:a,radius:b,popularEvents:c,nextWeekendEvents:d}),e.hideLoading()}})}}),Object.defineProperty(App.prototype,"componentDidMount",{writable:!0,configurable:!0,value:function(){"use strict";var a=this;this.searchInput=this.refs.searchInput.getDOMNode(),this.searchRadiusInput=this.refs.searchRadiusInput.getDOMNode(),this.popularEvents=this.refs.popularEvents.getDOMNode(),this.nextWeekendEvents=this.refs.nextWeekendEvents.getDOMNode(),this.service=new google.maps.places.AutocompleteService,$(this.searchInput).typeahead({highlight:!0},{displayKey:"prediction",source:function(b,c){a.service.getPlacePredictions({input:b},function(a,b){b==google.maps.places.PlacesServiceStatus.OK&&c($.map(a,function(a){return{prediction:a.description}}))})}}).on("typeahead:selected",function(b,c){a.showLoading(),a.getData(c.prediction,a.searchRadiusInput.value,a.popularEvents.checked,a.nextWeekendEvents.checked)}).on("focus",function(){$(".location-marker").css("opacity",1)}).on("focusout",function(){$(".location-marker").css("opacity",0)}),this.hideLoading()}}),Object.defineProperty(App.prototype,"hideLoading",{writable:!0,configurable:!0,value:function(){"use strict";$(this.refs.eventsListContainer.getDOMNode()).removeClass("loading"),$(this.refs.loader.getDOMNode()).hide()}}),Object.defineProperty(App.prototype,"showLoading",{writable:!0,configurable:!0,value:function(){"use strict";$(this.refs.eventsListContainer.getDOMNode()).addClass("loading"),$(this.refs.loader.getDOMNode()).show()}}),Object.defineProperty(App.prototype,"searchRadiusChangeHandler",{writable:!0,configurable:!0,value:function(a){"use strict";var b=this.searchInput.value;""!=$.trim(b)&&(this.showLoading(),this.getData(b,a.target.value,this.popularEvents.checked,this.nextWeekendEvents.checked))}}),Object.defineProperty(App.prototype,"optionsHandler",{writable:!0,configurable:!0,value:function(a){"use strict";this.setState({popularEvents:this.popularEvents.checked,nextWeekendEvents:this.nextWeekendEvents.checked});var b=this.searchInput.value;""!=$.trim(b)&&(this.showLoading(),"popular-events"==$(a.target).attr("name")?this.getData(this.searchInput.value,this.searchRadiusInput.value,this.popularEvents.checked,this.nextWeekendEvents.checked):this.getData(this.searchInput.value,this.searchRadiusInput.value,this.popularEvents.checked,this.nextWeekendEvents.checked))}}),Object.defineProperty(App.prototype,"render",{writable:!0,configurable:!0,value:function(){"use strict";var a=this.state.location,b=this.state.radius,c=this.state.popularEvents,d=this.state.nextWeekendEvents;return React.createElement("div",null,React.createElement("div",{id:"logo-container"},React.createElement("div",{id:"logo"})),React.createElement("div",{className:"loader",ref:"loader"},React.createElement("img",{src:"../img/icons/48x48.png"})),React.createElement("div",{className:"search-box"},React.createElement("div",{className:"block-header"},React.createElement("span",{className:"title"},"Popular events within",React.createElement("select",{className:"search-radius-input",ref:"searchRadiusInput",onChange:this.searchRadiusChangeHandler.bind(this),defaultValue:b},React.createElement("option",{value:"10"},"10"),React.createElement("option",{value:"25"},"25"),React.createElement("option",{value:"50"},"50")),"miles around ")),React.createElement("div",{className:"location-input"},React.createElement("span",{className:"location-marker"}),React.createElement("input",{autoFocus:!0,type:"text",ref:"searchInput",className:"search-input",placeholder:"Enter your location here",defaultValue:a}))),React.createElement("div",{className:"event-options"},React.createElement("label",null,React.createElement("input",{type:"checkbox",value:"true",ref:"popularEvents",name:"popular-events",checked:""==c?!1:!0,onChange:this.optionsHandler.bind(this)}," Popular ")),React.createElement("label",null,React.createElement("input",{type:"checkbox",value:"true",ref:"nextWeekendEvents",name:"next-weekend-events",checked:""==d?!1:!0,onChange:this.optionsHandler.bind(this)}," Next Weekend "))),React.createElement("div",{className:"events-list-container",ref:"eventsListContainer"},React.createElement(EventsList,{events:this.state.events,locationName:this.state.location})))}}),storage.get("eventbrite-aroundme",function(a){if(void 0!==a["eventbrite-aroundme"]){var b=JSON.parse(a["eventbrite-aroundme"]);locationName=b.locationName,locationData=b.locationData,locationRadius=b.locationRadius,popularEvents=b.popularEvents,nextWeekendEvents=b.nextWeekendEvents}React.render(React.createElement(App,{locationName:locationName,locationData:locationData,locationRadius:locationRadius,popularEvents:popularEvents,nextWeekendEvents:nextWeekendEvents}),mountNode)});